Uzmobile Узбекистан

**Функциональные требования**

к PDA-порталу **AntiStress**

Общая информация
================

Документ содержит требования к мобильной версии портала «AntiStress»,
который позволяет пользователям прослушивать аудиофайлы с
антистресс-контентом. Пользователь может выбрать контент для
прослушивания в зависимости от стрессового фактора: хроническая
усталость, повышенное напряжение и пр.

Общие требования
================

1.  Портал должен обеспечивать доступ пользователей мобильных устройств
    к сервису AntiStress.

2.  Язык портала:

    a.  Узбекский (по умолчанию);

    b.  Русский;

3.  Язык отправки смс-сообщений должен совпадать с языком, выбранном на
    портале. С этой целью необходимо отправлять на бэкенд информацию о
    языке портала каждый раз в момент отправки запроса списка контента
    (на бэкенде будет храниться последнее полученное значение).

4.  Язык на текстовых экранах [[Экран
    оферты]{.underline}](#экран-оферты), [[Экран политики
    конфиденциальности]{.underline}](#экран-политики-конфиденциальности)
    должен совпадать с языком портала. Тексты хранятся на бэкенде как
    HTML, портал получает тексты по API путем запроса страницы на нужном
    языке. Если язык не указан -- используется узбекский. Тексты страниц
    могут быть отредактированы через CMS текстов.

5.  Все стоимости указаны в Сум (UZS).

6.  В целях защиты от многократного нажатия на кнопки и другие
    кликабельные элементы интерфейса, если действие требует асинхронной
    обработки, должен быть реализован таймаут по нажатию = 2-3 секунды.

7.  Портал должен быть интегрирован с Googl Analytics.

8.  **Требования к кэшированию**: если воспроизведение аудио файла опции
    началось, то данный аудиофайл должен быть сохранен в кэш устройства
    и в случае отсутствия интернет-соединения должен быть воспроизведен
    до конца в режиме offline. Оценочный размер аудио файла опции -- от
    33 до 55 MB.

Требования к совместимости
--------------------------

Устройства и браузеры, работа на которых гарантируется, перечислены в
таблице. При попытке открыть сайт в версии браузера ниже указанной в
таблице должно отображаться [[сообщение «браузер не
поддерживается»]{.underline}](#браузер-не-поддерживается). Для
браузеров, которых нет в таблице, плашка не отображается независимо от
версии.

Таблица 1 --- Требования к совместимости.

  --------- ------------------ -------------------------------------------------------
  **OS**    **Браузер**        **Минимальная версия, на которой НЕ выдается плашка**
  iOS       Safari             12
            Chrome             71
  Android   Chrome             71
            YaBrowser          19
            Samsung Internet   10
            Opera Mini         40
            FireFox            68
  --------- ------------------ -------------------------------------------------------

Требования к плееру (внешние воздействия)
-----------------------------------------

Если браузер свернут или экран погас, то воспроизведение продолжается.
Остальные требования перечислены в таблице.

Таблица 2 --- Требования к плееру.

  Получение входящего смс сообщения                     Воспроизведение не прерывается, но затухает на время проигрывания звука sms
  ----------------------------------------------------- ------------------------------------------------------------------------------------------
  Отправка исходящего смс сообщения                     Воспроизведение не прерывается
  Получение push сообщения                              Воспроизведение не прерывается, но затухает на время проигрывания звука push сообщения.
  Получение входящего вызова.                           Воспроизведение ставится на паузу, по завершении вызова продолжается автоматически
  Совершение исходящего вызова                          Воспроизведение ставится на паузу, по завершении вызова продолжается автоматически
  Подключение сетевого кабеля                           Воспроизведение не прерывается
  Отключение сетевого кабеля.                           Воспроизведение не прерывается
  Подключение к USB порту ПК                            Воспроизведение не прерывается
  Отключение от USB порта ПК                            Воспроизведение не прерывается
  Подключение гарнитуры проводной/блютус                Воспроизведение не прерывается
  Отключение гарнитуры проводной/блютус                 Воспроизведение ставится на паузу
  Нажатие на кнопку ВКЛ/ВЫКЛ                            Воспроизведение не прерывается
  Переход в режим блокировки. Без пароля на телефоне    Воспроизведение не прерывается
  Переход в режим блокировки. С паролем на телефоне     Воспроизведение не прерывается
  Проверка работы одновременно со стандартным плеером   При запуске воспроизведения мелодии в стандартном плеере воспроизведение останавливается
  Проверка работы одновременно со стандартным радио     При запуске воспроизведения мелодии в стандартном плеере воспроизведение останавливается

Требования к лендингу
---------------------

1.  Необходимо настроить определение абонентов по регионам по def-кодам.

2.  Необходимо сохранять историю подписок.

3.  Если номер телефона определен, номера телефона нет в истории
    подписок, номер телефона принадлежит DEF коду, по которому разрешен
    серый лендинг, то пользователь авторизуется автоматом и автоматом
    подписывается на услугу (промо услугу). Это означает, что
    пользователь сразу переходит по отдельному URL на [[Главный экран
    (авторизованный, серый
    лендинг)]{.underline}](#авторизованный-серый-лендинг) в
    авторизованном состоянии. См. [[Типы
    авторизации]{.underline}](#типы-авторизации).

Требования к авторизации
------------------------

1.  [[[[[]{#_Toc500930888 .anchor}]{#_Toc460574478
    .anchor}]{#_Toc425762975 .anchor}]{#_Toc397096785
    .anchor}]{#_Требования_к_защите .anchor}Авторизация доступна
    абонентам UzMobile Узбекистан.

2.  Время сессии - ?

3.  При авторизации проверяется, подключена ли услуга «AntiStress».

-   Если услуга не подключена:

<!-- -->

-   Подключается промо подписка (первые 3 дня бесплатно, далее по
    стандартной тарификации), если не была подключена ранее.

-   Подключается платная подписка. См. [[Требования к подключению
    услуги]{.underline}](#требования-к-подключению-услуги).

<!-- -->

-   Если услуга подключена, то пользователь переходит в авторизованное
    > состояние.

<!-- -->

-   Авторизация срабатывает, даже если очередная тарификация была
    > неуспешной (т.е. услуга подключена, но заблокирована). Проверка на
    > оплату подписки происходит при переходе на [[Экран
    > плеера]{.underline}](#экран-плеера).

1.  При первой авторизации (автоматической или стандартной) информация о
    пользователе (язык и пол) должна записываться в cookie-файлы:

-   Если пользователь нажал кнопку «Выйти», то информация о пользователе
    > удаляется из cookie-файлов.

1.  Подтвержденный профиль абонента создается:

<!-- -->

a.  При переходе по URL [[Главного экрана серого
    лендинга]{.underline}](#авторизованный-серый-лендинг);

b.  По нажатию кнопки «Войти» на [[Экране
    авторизации]{.underline}](#экран-ввода-пароля) (успешный сценарий).
    Все другие попытки авторизации хранить в отдельной таблице «попыток»
    авторизации до того, как они становятся успешными (msisdn + смс
    код).

<!-- -->

1.  Если пользователь авторизован, но отключил услугу через SMS, то при
    переходе на [[Экран плеера]{.underline}](#экран-плеера) отображается
    информационное окно с алертом о предложении продления подписки (см.
    [[Модальное окно доступа]{.underline}](#модальное-окно-доступа)).

2.  Если пользователь не протарифицировался и на момент неуспешной
    попытки списания абон. платы находится в авторизованном состоянии на
    портале, то при переходе на [[Экран
    плеера]{.underline}](#экран-плеера) пользователю демонстрируется
    алерт в информационном окне типа «Услуга заблокирована» (см.
    [[Тексты алертов]{.underline}](#тексты-алертов)).

### Типы авторизации

На портале есть два типа авторизации:

-   ***Стандартная (белая).*** Авторизация выполняется по вводу номера
    > телефона и одноразового пароля (номер телефона и пароль
    > сохраняются в cookie, если пользователь нажал «Запомнить меня».
    > При следующей авторизации номер телефона и пароль подставляются
    > автоматически). Пароль из 4 цифр, срока жизни пароля нет.

<!-- -->

-   Если номер абонента не определился

-   Если у номера абонента уже была ранее подписка на услугу

<!-- -->

-   ***Автоматическая (серая).*** Для автоматической авторизации
    > создается отдельный URL, при переходе по которому пользователь
    > всегда автоматически авторизуется и подключается к промо услуге в
    > фоновом режиме (это означает, что пользователю не отображаются
    > экраны авторизации). В случае успешной авторизации с подпиской в
    > фоновом режиме по нажатию *«Хочу избавиться от стресса»*
    > происходит переход сразу с [[Главного экрана (серый
    > лендинг)]{.underline}](#авторизованный-серый-лендинг) на [[Экран
    > выбора пола]{.underline}](#экран-выбора-пола-и-старт):

<!-- -->

-   Если номер абонента определился и принадлежит региону, которому
    > разрешен серый лендинг, и у номера абонента не было ранее подписок
    > на услугу.

### Требования к полю ввода номера телефона

При стандартной авторизации требуется ввести номер телефона (если он не
был сохранен в cookie ранее). Требования к вводу номера телефона:

1.  В поле ввода номера телефона должен быть закреплен код со значением
    «+998». Пользователь должен иметь возможность ввести максимум 9 цифр
    в этом поле. Ввод нецифровых символов запрещен.

2.  Вводимые символы автоматически приводятся к формату: +998-хх ххх хх
    хх, где +998 -- закрепленный в поле код страны;

3.  При вставке номера телефона из буфера обмена ОС:

    1.  При вставке строки, содержащей не только цифры -- символы, кроме
        цифр, игнорируются и в поле вставляются последние 9 цифр;

    2.  Если вставляются только цифры, то в поле должны попадать 9 цифр
        с конца вставляемой строки.

### Требования к защите от спама и вредоносных действий

На страницах ввода номера телефона и ввода кода должен быть предусмотрен
механизм защиты от взлома (брутфорс):

1.  Ограничение по IP:

    1.  Если с одного IP количество запросов на отправку смс или
        неверный ввод кода больше 10 в минуту, то IP пользователя должен
        быть блокирован на 5 мин.;

    2.  Если в течение 24 часов после блокировки на 5 минут пользователь
        повторно выполняет условие из предыдущего пункта, то IP должен
        быть блокирован на 24 часа;

    3.  Аутентификация с другого IP с тем же номером разрешена.

2.  Ограничение по MSISDN:

    1.  Если с одного номера количество запросов на отправку смс или
        неверный ввод кода больше 10 в течение 5 минут, то учетная
        запись должна быть блокирована на 5 мин;

    2.  Если в течение 24 часов после блокировки на 5 минут пользователь
        повторно выполняет условие из предыдущего пункта, то учетная
        запись должна быть блокирована на 24 часа.

3.  В подсчете учитываются запросы на отправку смс и ввод неверного
    кода, подсчет ведется отдельно.

4.  На время блокировки вместо обычных алертов на любой запрос выводится
    алерт с указанием времени блокировки.

5.  Логироваться должны все факты отправки смс в сторону
    пользовательских интерфейсов.

Требования к cookie-файлам
--------------------------

Следующие параметры должны сохраняться в cookie-файлах:

1.  Выбранный язык (дата истечения срока хранения -- до очистки cookie
    пользователем)

2.  Пол. Мужской или женский (дата истечения срока хранения -- до
    очистки cookie пользователем)

3.  ?Информация о неподдерживаемом браузере (дата истечения срока
    хранения -- до очистки cookie пользователем)

4.  Номер телефона и пароль (сохраняется при белой авторизации, если
    пользователь активировал чек-бокс «Запомнить меня», дата истечения
    срока хранения -- до деактивации чек-бокса «Запомнить меня»).

Требования к подключению услуги
-------------------------------

1.  Стоимость услуги «AntiStress» - ? сум в сутки.

2.  Пользователю предоставляется бесплатный trial период -- 3 дня с
    момента первого подключения услуги. Далее тарификация услуги как
    описано выше. При неудачной попытке списания абон. платы доступ к
    функционалу приложения блокируется на следующий день после неудачной
    попытки. При переходе на [[Экран плеера]{.underline}](#экран-плеера)
    абоненту демонстрируется сообщение о блокировке:

-   Если пользователь авторизован, см. [[Требования к
    авторизации]{.underline}](#требования-к-лендингу);

-   Если пользователь не авторизован, см. [[Экраны
    авторизации]{.underline}](#экраны-авторизации);

1.  Отключение услуги не должно происходить при выходе пользователя с
    портала. Отключение только через смс.

Требования к контенту
=====================

Язык аудио контента должен совпадать с языком, выбранном на портале.

1.  На портале должен использоваться контент.

2.  Для разных экранов предусмотрены разные картинки по размеру.

3.  Контент хранится на бэкэнде.

4.  Каждая опция включает:

-   Иконка

-   Изображение (мужской и женский персонаж) в трех вариантах: 150, 220
    > и 280

-   Фон

1.  На момент 1-го релиза количество опций -- 4:

    -   Тревожность

    -   Хроническая усталость

    -   Ухудшение сна

    -   Аэрофобия

Требования к интерфейсу
=======================

Повторяющиеся элементы
----------------------

### Лоадер

На время длительной обработки запроса отображается лоадер.

![](media/image1.png){width="2.4094838145231847in"
height="4.284027777777778in"}![](media/image2.png){width="2.411111111111111in"
height="4.286921478565179in"}

Рисунок 5.1 -- Лоадер

Экраны авторизации
------------------

Экраны авторизации отображаются для ***неавторизованного***
пользователя:

-   При переходе с [[Главного экрана (неавторизованный, белый
    лендинг)]{.underline}](#неавторизованный-белый-лендинг) на портал
    (нажатие кнопки «Хочу избавиться от стресса»);

-   При переходе с [[Экрана опции]{.underline}](#экран-опции) на [[Экран
    плеера]{.underline}](#экран-плеера).[]{#_Авторизация_–_номер
    .anchor}

### Экран ввода номера телефона

Содержит следующие элементы:

1.  []{#_Hlk63764439 .anchor}Выпадающий список выбора языка. Выбранный
    пользователем язык отображается на кнопке. Выбранное на данном этапе
    значение языка сохраняется в cookie:

-   UZ -- узбекский (по умолчанию);

-   РУ -- русский

1.  Кнопка «Закрыть». По нажатию экран закрывается, отображается
    предыдущий экран;

2.  Заголовок и текст. См. [[Таблица
    текстов]{.underline}](#ошибка-404-страница-не-найдена)

3.  Поле для ввода номера телефона (поле заполнено, если номер сохранен
    в cookie). Содержит подсказку «Номер телефона». По нажатию на поле
    отображается мигающий курсор, подсказка уменьшается, сдвигается
    вверх (выводится над курсором). Подробнее см. [[Требования к полю
    ввода номера телефона]{.underline}](#требования-к-контенту)

4.  Текст о пробном периоде. См. [[Таблица
    текстов]{.underline}](#ошибка-404-страница-не-найдена)

5.  Кнопка «Выслать код для входа». Неактивна (серого цвета), пока не
    будут введены 9 цифр. По нажатию выполняются ***проверки:***

    1.  Если номер телефона не принадлежит сети UzMobile, под полем
        выводится сообщение красного цвета: «*Номер не принадлежит сети
        UzMobile*» (в поле справа отображается знак восклицания красного
        цвета («!»));

    2.  Если пользователь превысил лимит отправки запросов (см.
        [[Требования к защите от спама и вредоносных
        действий]{.underline}](#_Требования_к_защите)), под полем
        выводится сообщение красного цвета: «*Лимит по отправке запросов
        исчерпан. Повторите запрос через 5 мин.*» (в поле справа
        отображается знак восклицания («!»));

    3.  Если пользователь превысил лимит отправки запросов повторно (см.
        [[Требования к защите от спама и вредоносных
        действий]{.underline}](#_Требования_к_защите)), под полем
        выводится сообщение красного цвета: «*Лимит по отправке запросов
        исчерпан. Повторите запрос через 24 часа*» (в поле справа
        отображается знак восклицания («!»));

    4.  Если ошибок нет, переход на [[Экран ввода
        пароля]{.underline}](#экран-ввода-пароля)

6.  Подвал страницы с текстом. См. [[Таблица
    текстов](#ошибка-404-страница-не-найдена)]{.underline} Часть текста
    «условиями публичной оферты» является гиперссылкой, по нажатию
    переход на [[Экран оферты]{.underline}](#экран-оферты)

![](media/image3.png){width="2.5016601049868767in"
height="4.447916666666667in"}

Рисунок 5.2 -- Стартовый экран авторизации (ввод номера телефона)

![](media/image4.png){width="2.448931539807524in"
height="4.354166666666667in"}

Рисунок 5.3 -- Стартовый экран авторизации с введенным номером телефона

![](media/image5.png){width="2.519235564304462in"
height="4.479166666666667in"}

Рисунок 5.4 -- Алерты

### Экран ввода пароля

Содержит следующие элементы:

1.  Выпадающий список выбора языка. Выбранный пользователем язык
    отображается на кнопке. Выбранное на данном этапе значение языка
    сохраняется в cookie:

-   UZ -- узбекский (по умолчанию);

-   РУ -- русский

1.  Кнопка «Закрыть», по нажатию - возврат на предыдущий экран
    [[Стартовый экран
    авторизации]{.underline}](#экран-ввода-номера-телефона)

2.  Заголовок и текст. См. [[Таблица
    текстов]{.underline}](#ошибка-404-страница-не-найдена)

3.  Чек-бокс «Запомнить меня» (по умолчанию не активный). По нажатию
    логин и пароль сохраняются в cookie, при следующей авторизации
    отображается активный чек-бокс. При деактивации логин и пароль
    очищаются из cookie.

4.  Поле для ввода пароля (поле заполнено, если пароль сохранен в
    cookie). Содержит подсказку «Код из SMS». По нажатию на поле
    отображается мигающий курсор, подсказка уменьшается, сдвигается
    вверх (отображается над введённым паролем). В поле можно ввести не
    более 4 цифр, вводимые символы не скрыты.

5.  Кнопка «Войти». Неактивна (серого цвета), пока не будут введены 4
    цифры. По нажатию:

    a.  Если пользователь ввел неверный пароль (без превышения лимитов),
        под поле ввода кода выводится ошибка: «*Неверный пароль*».

    b.  Если пользователь превысил лимит (см. [[Требования к защите от
        спама и вредоносных
        действий]{.underline}](#_Требования_к_защите)), под полем ввода
        кода выводится ошибка: «*Лимит по отправке запросов исчерпан.
        Повторите запрос через 5 мин.*».

    c.  Если пользователь превысил лимит повторно, под полем ввода кода
        выводится ошибка: «*Лимит по отправке запросов исчерпан.
        Повторите запрос через 24 часа*».

    d.  Если во время подключения услуги произошла ошибка биллинга
        (недостаточно средств или подписочная платформа не может
        протарифицировать по другой причине), под полем ввода кода
        выводится ошибка: «*Пожалуйста, попробуйте проверить свой баланс
        и повторить попытку позднее*».

    e.  Если при подключении произошла ошибка: «*При подключении услуги
        произошла ошибка. Повторите попытку позднее*».

    f.  Если услуга уже подключена (в том числе подключена и
        заблокирована) или подключение услуги успешно, то выполняется
        проверка:

-   Если пользователь впервые зашел на портал или очистил cookie с
    данными про пол (мужской или женский), то переход на [[экран выбора
    пола]{.underline}](#экран-выбора-пола-и-старт);

-   Если данные про пол (мужской иди женский) пользователя сохранены, то
    пользователь переходит на [[Главный экран авторизованного
    пользователя]{.underline}](#авторизованный-пользователь).

1.  Ссылка «Отправить код повторно» и счетчик обратного отсчета 30
    секунд в формате «через MM:CC сек.». Ссылка неактивна, пока идет
    отсчет. По истечении таймера ссылка становится активна. По нажатию
    на ссылку код отправляется повторно, обратный отсчет начинается
    заново.

2.  Ссылка «Изменить номер телефона». По нажатию возврат на [[Стартовый
    экран авторизации]{.underline}](#экран-ввода-номера-телефона), поле
    «Номер телефона» не заполнено.

3.  Подвал. страницы с текстом. См. [[Таблица
    текстов](#ошибка-404-страница-не-найдена)]{.underline} Часть текста
    «условиями публичной оферты» является ссылкой, по нажатию переход на
    [[Экран оферты]{.underline}](#экран-оферты)

![](media/image6.png){width="2.1970089676290465in" height="3.90625in"}

Рисунок 5.5 -- Экран ввода пароля (чек-бокс по умолчанию не установлен)

![](media/image7.png){width="2.229044181977253in"
height="3.9632075678040244in"}

Рисунок 5.6 Экран ввода пароля с введенным кодом

Экран выбора пола и старт
-------------------------

Экран должен отображаться пользователю 1 раз либо при переходе с
[[Экрана авторизации]{.underline}](#экраны-авторизации) по нажатию
кнопки «Войти» в случае успешной авторизации (белый лендинг), либо при
переходе с [[Главного экрана (неавторизованный, серый
лендинг)]{.underline}](#авторизованный-серый-лендинг) по нажатию «*Хочу
избавиться от стресса*». Если cookie очищены, то экран отображается
снова.

Экран содержит следующие элементы:

1.  Текст. См. [[Тексты сервиса]{.underline}](#тексты-сервиса)

<!-- -->

1.  Изображение -- женский или мужской персонаж в зависимости от
    выбранного значения переключателя;

2.  Переключатель женского и мужского персонажа (каждый персонаж имеет
    соответствующую иконку). Иконка активного персонажа выделена белым
    цветом на синей кнопке, иконка неактивного -- синим цветом на белом
    фоне;

3.  Кнопка «Начать релаксацию», по нажатию изменения сохраняются,
    значение пола записывается в cookie. Пользователь переходит на
    [[Главный экран для авторизованного
    пользователя]{.underline}](#авторизованный-пользователь).

4.  Текст отключения услуги. См. [[Тексты
    сервиса]{.underline}](#тексты-сервиса)

![](media/image8.png){width="2.2028674540682416in"
height="3.9166666666666665in"}

Рисунок 5.7 -- Выбор пола. Выбрано «Я женщина»

![](media/image9.png){width="2.372767935258093in" height="4.21875in"}

Рисунок 5.8 -- Выбор пола. Выбрано «Я мужчина»[[]{#_Bottom_sheet_меню_1
.anchor}]{#_Bottom_sheet_меню_2 .anchor}

Главный экран
-------------

Картинки статичные, хранятся на портале.

### Неавторизованный (белый лендинг)

Главный экран для неавторизованного пользователя (белый лендинг)
содержит следующие элементы:

1.  Название портала «ANTISTRESS» (некликабельное);

2.  Кнопка авторизации (в виде иконки). По нажатию переход на [[экран
    авторизации]{.underline}](#экраны-авторизации);

3.  Изображение (мужской и женский персонаж);

4.  Заголовок и текст -- см. [[Таблица
    текстов]{.underline}](#ошибка-404-страница-не-найдена)

5.  Подзаголовок: «Что вас беспокоит?».

    1.  Изображение -- иконки каждой из опций;

    2.  Текст для каждой из опций -- в виде вопросительных предложений
        (см. [[Таблица
        текстов]{.underline}](#ошибка-404-страница-не-найдена));

6.  Заголовок «Сервис «ANTISTRESS»»;

    1.  Три изображения с информационными текстами под заголовками
        «Расслабьтесь», «Повышайте качество жизни», «Разработано врачом»
        (см. [[Таблица
        текстов]{.underline}](#ошибка-404-страница-не-найдена)).

-   Пролистываются свайпом.

-   Зациклины.

1.  Кнопка «Хочу избавиться от стресса» (фиксируется внизу экрана при
    скроллинге), по нажатию переход на [[экран
    авторизации]{.underline}](#экраны-авторизации)

![](media/image10.png){width="4.727062554680665in" height="7.96875in"}

Рисунок 5.9 -- Главный экран, неавторизованный (белый лендинг)

### Авторизованный (серый лендинг)

Для данного экрана создается отдельный URL (см. [[Требования к
лендингу]{.underline}](#требования-к-лендингу)). Главный экран для
авторизованного пользователя (серый лендинг) аналогичен главному экрану
для неавторизованного пользователя (белый лендинг), кроме:

1.  Нет иконки авторизации;

2.  По нажатию на кнопку «Хочу избавиться от стресса» (фиксируется внизу
    экрана при скроллинге) переход на [[Экран выбора пола и
    старт]{.underline}](#экран-выбора-пола-и-старт).

![](media/image11.png){width="4.041174540682415in" height="6.8125in"}

Рисунок 5.10 -- Главный экран, неавторизованный (серый лендинг)

### Авторизованный пользователь

Главный экран для авторизованного пользователя содержит следующие
элементы:

1.  Название портала «ANTISTRESS» (некликабельное);

2.  Кнопка меню (в виде вертикального троеточия). По нажатию
    отображается окно [[Меню]{.underline}](#меню).

3.  Заголовок и текст -- см. [[Таблица
    текстов]{.underline}](#ошибка-404-страница-не-найдена)

4.  Изображение -- мужской или женский персонаж в зависимости от выбора
    настройки пола -- Мужской или Женский.

5.  Подзаголовок: «Что вас беспокоит?».

6.  Строки опций (по умолчанию отображается 4 опции, при дальнейшем
    добавлении опций должен работать скроллинг). Список опций см.
    [[Требования к контенту]{.underline}](#требования-к-контенту).
    Каждая строка содержит:

    -   Иконка опции. Источник -- БД контента Интек.

    -   Название опции. Источник -- БД контента Интек.

    -   По нажатию в любом месте строки -- переход на [[Экран
        опции]{.underline}](#экран-опции)

![](media/image12.png){width="2.2025524934383203in"
height="4.427083333333333in"}

Рисунок 5.11 -- Главный экран, выбран пол «Женский»

![](media/image13.png){width="2.204882983377078in"
height="4.427083333333333in"}

Рисунок 5.12 -- Главный экран, выбран пол «Мужской»

Меню
----

По нажатию иконку меню (в виде вертикального троеточия) на главном
экране для авторизованного пользователя открывается окно меню со
следующими элементами:

1.  Выпадающий список выбора языка. Выбранный пользователем язык
    отображается на кнопке. По умолчанию установлен тот язык, который
    сохранен в cookie:

-   UZ -- узбекский (по умолчанию);

-   РУ -- русский

1.  Название портала «ANTISTRESS» (некликабельное);

2.  Кнопка «Закрыть» (в виде «Х»), по нажатию окно закрывается;

3.  Пункты меню:

    1.  Пол. По касанию в любом месте строки открывается [[Экран выбора
        пола]{.underline}](#экран-настройки-пола)

    2.  Публичная оферта. По касанию в любом месте строки переход на
        [[Экран оферты]{.underline}](#экран-оферты)

    3.  Политика о конфиденциальности. По касанию в любом месте строки
        переход на [[Экран политики
        конфиденциальности]{.underline}](#экран-политики-конфиденциальности)

    4.  О портале. По касанию в любом месте строки переход на [[Экран
        информации о портале]{.underline}](#экран-о-портале);

4.  Кнопка «Выйти». Отображается только для авторизованных
    пользователей. По касанию открывается [[Диалог подтверждения
    выхода]{.underline}](#модальное-окно-подтверждения-выхода)

5.  Текст отключения. См. [[Тексты
    сервиса]{.underline}](#тексты-сервиса).

![](media/image14.png){width="2.27424321959755in"
height="4.043572834645669in"}

Рисунок 5.13 -- Экран «Настройки»

### Экран настройки пола

Экран содержит следующие элементы:

1.  Кнопка «Назад» (в виде «\<») и текст -- «Вернуться», по нажатию
    > переход на предыдущий экран;

2.  Изображение -- женский или мужской персонаж в зависимости от
    > выбранного значения переключателя;

3.  Переключатель женского и мужского персонажа (каждый персонаж имеет
    > соответствующую иконку). Иконка активного персонажа выделена белым
    > цветом на синей кнопке, иконка неактивного -- синим цветом на
    > белом фоне;

4.  Кнопка «Сохранить изменения», по нажатию изменения сохраняются,
    > значение пола записывается в cookie.

![](media/image15.png){width="2.1832206911636045in"
height="3.8817344706911636in"}

Рисунок 5.14 - Экран выбора пола, женский персонаж

![](media/image16.png){width="2.261454505686789in"
height="4.020833333333333in"}

Рисунок 5.15 - Экран выбора пола, мужской персонаж

### Модальное окно подтверждения выхода

Окно содержит следующие элементы:

1.  Заголовок -- Выйти из аккаунта?

2.  Текст: «Вы всегда сможете вернуться и продолжить релаксацию»

3.  Кнопка «Нет, хочу остаться». По нажатию диалог закрывается,
    > пользователь остается авторизован, возвращается на [[Экран
    > «Настройки»]{.underline}](file:///C:\Users\krasi\Downloads\настройки#_Экран_).

4.  Кнопка «Да, ухожу». По нажатию выполняется выход из сервиса,
    > пользователь переходит в неавторизованное состояние. Переход на
    > [[Главный экран]{.underline}](#главный-экран).

![](media/image17.png){width="2.390277777777778in"
height="4.249879702537183in"}

Рисунок 5.16 -- Окно подтверждения выхода из приложения

### Экран оферты

Экран содержит следующие элементы:

1.  Кнопка «Назад» (в виде «\<») и текст -- «Вернуться», по нажатию
    переход на предыдущий экран;

2.  Заголовок и текст см. [[Тексты
    сервиса]{.underline}](#тексты-сервиса).

![](media/image18.png){width="2.0965277777777778in"
height="6.629695975503062in"}

Рисунок 5.17 Экран оферты

### Экран политики конфиденциальности

Экран содержит следующие элементы:

1.  Кнопка «Назад» (в виде «\<») и текст -- «Вернуться», по нажатию
    переход на предыдущий экран;

2.  Заголовок и текст см. [[Тексты
    сервиса]{.underline}](#тексты-сервиса).

![](media/image19.png){width="2.092361111111111in"
height="6.771141732283464in"}

Рисунок 5.18 Экран политики конфиденциальности

### Экран о портале

Экран содержит следующие элементы:

1.  Кнопка «Назад» (в виде «\<») и текст -- «Вернуться», по нажатию
    переход на предыдущий экран;

2.  Заголовок и текст см. [[Тексты
    сервиса]{.underline}](#тексты-сервиса).

![](media/image20.png){width="2.4310400262467193in" height="7.6875in"}

> Рисунок 5.19 Экран о портале

Экран опции
-----------

На экран опции авторизованный пользователь переходит с Главного экрана.

Экран опции поддерживает как вертикальную, так и горизонтальную
ориентацию.

*[Вертикальная ориентация экрана.]{.underline}* Экран содержит следующие
элементы:

1.  ***Стрелка «Назад» и текст «На главную».*** По касанию -- переход на
    [[Главный экран для авторизованного
    пользователя]{.underline}](#авторизованный-пользователь).

2.  ***Изображение*** -- в зависимости от выбранного в настройках пола
    (в зависимости от опции не меняется).

3.  ***Название и текст-описание*** выбранной на главном экране опции.
    См. [[Тексты сервиса]{.underline}](#тексты-сервиса).

4.  ***Кнопка «Начать сеанс».*** По касанию выполняются проверки на
    наличие ***авторизации***, на наличие ***подписки***:

    1.  Если пользователь авторизован, подписка подключена и не
        заблокирована -- переход на [[Экран
        плеера]{.underline}](#ошибка-404-страница-не-найдена);

    2.  Если пользователь авторизован, подписка подключена, но
        заблокирована --- отображается информационное окно (см. вид
        ошибки на рис. ниже, *только вертикальная ориентация*):

        -   Заголовок: «Услуга заблокирована»;

        -   Текст: «Пожалуйста, пополните счет для продления подписки»;

        -   Кнопка «Ок», по нажатию окно закрывается;

    3.  Если пользователь авторизован, но услуга не подключена
        (например, отключил подписку через SMS) --- отображается
        [[информационное окно с предложением о продлении
        подписки]{.underline}](#модальное-окно-доступа);

    4.  Если пользователь не авторизован, переход на [[Экран
        авторизации]{.underline}](#экраны-авторизации).

*[Горизонтальная ориентация экрана.]{.underline}* Экран содержит такие
же элементы, что и экран с вертикальной ориентацией, но нижний блок с
названием, текстом-описанием и кнопкой «Начать сеанс» накладывается
поверх изображения.

![](media/image21.png){width="2.2438779527559056in"
height="3.9895833333333335in"}

Рисунок 5.20 -- Экран опции, выбран пол «Женский», вертикальный экран

![](media/image22.png){width="4.161111111111111in"
height="2.347282370953631in"}

Рисунок 5.21 -- Экран опции, выбран пол «Женский», горизонтальный экран

![](media/image23.png){width="2.2321609798775155in" height="3.96875in"}

Рисунок 5.22 -- Вид ошибки (услуга заблокирована)

### Модальное окно доступа

Если пользователь авторизован, но подписка не подключена (например,
отключил по СМС), то при переходе с [[экрана
Опции]{.underline}](#экран-опции) на [[Экран
плеера]{.underline}](#экран-плеера) отображается модальное окно с
предложением о подписке.

Окно содержит следующие элементы:

1.  Кнопка «Закрыть» (в виде «Х»), по нажатию окно закрывается;

2.  Иконка, заголовок и текст. См. [[Тексты
    сервиса]{.underline}](#тексты-сервиса).

3.  Текст о стоимости подписки. См. [[Тексты
    сервиса]{.underline}](#тексты-сервиса).

4.  Кнопка «Продлить подписку», по нажатию выполняются проверки:

-   Если запрос обработан, у пользователя достаточно средств для
    подключения, то услуга подключается, пользователь переходит на
    [[Главный экран для авторизованного
    пользователя]{.underline}](#авторизованный-пользователь), где сверху
    отображается плашка (см. вид плашки ниже):

<!-- -->

-   Текст: «Успешно», кнопка «Закрыть» (в виде Х).

<!-- -->

-   Если запрос в процессе обработки, то пользователь переходит на
    [[Главный экран для авторизованного
    пользователя]{.underline}](#авторизованный-пользователь), где сверху
    отображается плашка (см. вид плашки ниже):

<!-- -->

-   Текст: «Ваш запрос обрабатывается», кнопка «Закрыть» (в виде Х).

<!-- -->

-   Если во время подключения услуги произошла ошибка биллинга
    (недостаточно средств или подписочная платформа не может
    протарифицировать по другой причине), окно закрывается, пользователь
    переходит на [[Главный экран для авторизованного
    пользователя]{.underline}](#авторизованный-пользователь), где сверху
    отображается плашка (см. вид плашки ниже):

<!-- -->

-   Заголовок: «Ошибка подключения», текст: «**Ошибка! Источник ссылки
    не найден.**», кнопка «Закрыть» (в виде Х).

<!-- -->

-   Если во время подключения услуги произошла ошибка подключения, окно
    закрывается, пользователь переходит на [[Главный экран для
    авторизованного
    пользователя]{.underline}](#авторизованный-пользователь), где сверху
    отображается плашка (см. вид плашки ниже):

<!-- -->

-   Заголовок: «Ошибка подключения», текст: «При подключении услуги
    > произошла ошибка. Повторите попытку позднее».

![](media/image24.png){width="2.4034722222222222in"
height="4.273340988626422in"}

Рисунок 5.23 -- Модальное окно доступа

![](media/image25.png){width="2.1402023184601924in"
height="4.712913385826772in"}

Рисунок 5.24 -- Плашка с результатом запроса.

### Экран плеера

Экран плеера той или иной опции доступен только авторизованному
пользователю с подключенной и незаблокированной услугой. Если
пользователь авторизован, а услуга не подключена или подключена, но
заблокирована см. [[Проверка доступа]{.underline}](#экран-опции).

Экран плеера поддерживает как вертикальную, так и горизонтальную
ориентацию.

*[Вертикальная ориентация экрана.]{.underline}* Экран содержит следующие
элементы:

1.  Стрелка «Назад» (в виде «\<») и текст «На главную». По нажатию
    возврат на [[Главный экран для авторизованного
    пользователя]{.underline}](#авторизованный-пользователь).
    Воспроизведение файла прерывается (если воспроизведение было в
    процессе).

2.  ***До начала воспроизведения*** -- изображение.

    1.  Существуют два набора картинок: для мужского и женского пола;

    2.  Изображения для четырех опций отличаются только фоном
        (декоративными элементами) -- у каждый опции предусмотрен
        уникальный тематический фон, персонаж выглядит одинаково;

    3.  Для каждой опции предусмотрено три картинки с разными фазами
        расслабления. Таким образом, всего хранится 12 разных картинок;

    4.  Изображения хранятся на сервере;

    5.  До начала воспроизведения на экране демонстрируется первая
        картинка опции;

    6.  Во время воспроизведения поочередно меняются три картинки опции,
        как описано ниже (п. 4);

3.  Кнопка Play.

-   Кнопка Play меняется на Pause. По нажатию на Pause проигрывание
    прерывается, кнопка Pause сменяется на Play.

-   Появляется прогресс бар с временем (слева -- отсчет времени,
    прошедшего с начала воспроизведения, справа -- время, оставшееся до
    окончания файла, со знаком «минус»), с возможностью перемотки
    пользователем (переход к нужному месту файла касанием
    прогресс-бара).

1.  ***Во время воспроизведения:***

    -   Должна происходить анимация: переход между изображениями опции.
        > За время воспроизведения файла должно смениться 3 картинки
        > (меняется состояние персонажа, фон остается неизменным). Смена
        > картинок равномерно распределена пропорционально длительности
        > файла.

    -   Если есть прерывающее действие (подробнее см. [[Требования к
        > плееру (внешние
        > воздействия)]{.underline}](#требования-к-плееру-внешние-воздействия)):

    <!-- -->

    -   При подключении наушников воспроизведение не прерывается.

    -   При отключении наушников воспроизведение должно ставиться на
        > паузу.

    <!-- -->

    -   Если пользователь отключил услугу по смс -- идет проигрывание
        > файла (пользователь сможет пользоваться порталом до тех пор,
        > пока еще раз не сделает попытку зайти в плеер).

    -   По окончании воспроизведения (в том числе если пользователь
        > перешел к концу файла, переместив ползунок на прогресс баре в
        > крайнее правое положение) -- переход на [[Экран по окончании
        > воспроизведения]{.underline}](#экран-по-окончании-воспроизведения)

2.  Название опции.

*[Горизонтальная ориентация экрана.]{.underline}* Экран содержит такие
же элементы, что и экран с вертикальной ориентацией, но нижний блок с
кнопкой Play и прогресс-баром накладывается поверх изображения.

  ----------------------------------------------------------------------------------- ------------------------------------------------------------------------
  ![](media/image26.png){width="2.5860258092738406in" height="4.597916666666666in"}   ![](media/image27.png){width="2.5661056430446196in" height="4.5625in"}
  ----------------------------------------------------------------------------------- ------------------------------------------------------------------------

Рисунок 5.25 --- Два персонажа.

  ------------------------------------------------------------------------ ----------------------------------------------------------------------------------- ------------------------------------------------------------------------------------
  ![](media/image28.png){width="2.161855861767279in" height="3.84375in"}   ![](media/image29.png){width="2.145138888888889in" height="3.8140255905511813in"}   ![](media/image30.png){width="2.1572965879265094in" height="3.8356419510061244in"}
  ------------------------------------------------------------------------ ----------------------------------------------------------------------------------- ------------------------------------------------------------------------------------

Рисунок 5.26 -- Три фазы расслабления для каждой опции.

![](media/image31.png){width="2.1743055555555557in"
height="3.8658858267716534in"}

Рисунок 5.27 -- Пример фона для опции «Тревого».

![](media/image32.png){width="3.9319444444444445in"
height="2.2180096237970255in"}

Рисунок 5.28 -- Горизонтальная ориентация.

### Экран по окончании воспроизведения

Содержит следующие элементы:

1.  Заголовок -- Сеанс окончен

2.  Изображение -- меняется в зависимости от настройки пола -- «м» или
    «ж». Изображения хранятся на сервисе.

3.  Кнопка «Повторить еще раз». По нажатию переход на [[Экран
    плеера](#ошибка-404-страница-не-найдена) ]{.underline}

    a.  Если было прервано Интернет-соединение, отображается [[Экран
        отсутствия
        интернета]{.underline}](#ошибка-404-страница-не-найдена)

4.  Кнопка «Спасибо, мне помогло». По нажатию переход на [[Главный
    экран]{.underline}](#главный-экран)

![](media/image33.png){width="2.546527777777778in"
height="4.52769028871391in"}

Рисунок 5.29 -- Экран по окончании воспроизведения, выбран пол «Женский»

Экраны ошибок
-------------

### Ошибка 404 (страница не найдена)

Экран содержит следующие элементы:

1.  Иконка.

2.  Текст (см. [[Тексты алертов]{.underline}](#тексты-алертов))

3.  Кнопка «На главную», по нажатию переход на [[Главный
    экран]{.underline}](#главный-экран).

> ![](media/image34.png){width="2.3694444444444445in"
> height="4.212839020122485in"}

Рисунок 5.30 -- Ошибка 404

### Ошибка 503

Экран содержит следующие элементы:

1.  Иконка.

2.  Текст (см. [[Тексты алертов]{.underline}](#тексты-алертов))

3.  Кнопка «Обновить страницу», по нажатию экран обновляется.

![](media/image35.png){width="2.609027777777778in"
height="4.638814523184602in"}

Рисунок 5.31 -- Ошибка 503

### Браузер не поддерживается

Плашка должна выдаваться пользователю 1 раз при переходе на портал. Если
cookie очищены, то плашка выдается снова.

Плашка должна отображаться в верхней части экрана (накладывается поверх
по всей ширине страницы) и включать в себя следующие элементы:

1.  Заголовок и текст:

***Ваш браузер не поддерживается***

*Некоторые функции могут быть не доступны. Рекомендуем обновить
браузер.*

1.  Кнопка «Закрыть» (крест) - по нажатию плашка закрывается, информация
    записывается в cookie-файлы пользователя, плашка не отображается до
    очистки cookie-файлов.

![](media/image36.png){width="2.374641294838145in"
height="5.229166666666667in"}

> Рисунок 5.32 -- Браузер не поддерживается.

Тексты сервиса
--------------

Актуальная таблица текстов экранов в Redmine:
[[https://redmine.intech-global.com/documents/1682]{.underline}](https://redmine.intech-global.com/documents/1682)

Отдельно -- текст Оферты:
[[https://redmine.intech-global.com/documents/1683]{.underline}](https://redmine.intech-global.com/documents/1683)

Отдельно -- текст Политики Конфиденциальности:
[[https://redmine.intech-global.com/documents/1684]{.underline}](https://redmine.intech-global.com/documents/1684)

Тексты алертов
--------------

Тексты также есть в Redmine:
[[https://redmine.intech-global.com/documents/1682]{.underline}](https://redmine.intech-global.com/documents/1682)
(вкладка Алерты)

+----------------------+----------------------+----------------------+
| **Экран**            | **Сценарий**         | **Сообщение**        |
+======================+======================+======================+
| [[Стартовый экран    | Пользователь ввел    | Номер не принадлежит |
| авторизации](#экран- | номер телефона, не   | сети UzMobile        |
| ввода-номера-телефон | принадлежащий        |                      |
| а)]{.underline}      | абоненту UzMobile, и |                      |
| ошибки под полем     | нажал кнопку         |                      |
| ввода номера         | «Получить пароль»    |                      |
+----------------------+----------------------+----------------------+
|                      | Превышен лимит       | Лимит по отправке    |
|                      | попыток авторизации  | запросов исчерпан.   |
|                      | (блокировка 5 минут) | Повторите запрос     |
|                      |                      | через 5 мин          |
+----------------------+----------------------+----------------------+
|                      | После блокировки на  | Лимит по отправке    |
|                      | 5 минут пользователь | запросов исчерпан.   |
|                      | повторно превысил    | Повторите запрос     |
|                      | лимит (блокировка 24 | через 24 часа        |
|                      | часа)                |                      |
+----------------------+----------------------+----------------------+
| [[Экран ввода        | Пользователь ввел    | Неверный код из SMS  |
| пароля](#экран-ввода | пароль, не           |                      |
| -пароля)]{.underline | совпадающий с        |                      |
| }                    | высланным (не        |                      |
| ошибки под полем     | превышая лимиты по   |                      |
| ввода пароля         | отправки пароля).    |                      |
+----------------------+----------------------+----------------------+
|                      | Пользователь ввел    | Лимит по отправке    |
|                      | неверный пароль      | запросов исчерпан.   |
|                      | более 10 раз с       | Повторите запрос     |
|                      | одного IP в течение  | через 5 мин          |
|                      | 1 минуты, либо c     |                      |
|                      | одного номера более  |                      |
|                      | 10 раз в течение 5   |                      |
|                      | мин                  |                      |
+----------------------+----------------------+----------------------+
|                      | После блокировки на  | Лимит по отправке    |
|                      | 5 минут пользователь | запросов исчерпан.   |
|                      | повторно превысил    | Повторите запрос     |
|                      | лимит в течение 24   | через 24 часа        |
|                      | часов                |                      |
+----------------------+----------------------+----------------------+
|                      | У абонента           | Пожалуйста,          |
|                      | недостаточно средств | попробуйте проверить |
|                      | на счету для         | свой баланс и        |
|                      | подключения услуги   | повторить попытку    |
|                      |                      | позднее              |
+----------------------+----------------------+----------------------+
|                      | Ошибка при           | При подключении      |
|                      | подключении услуги   | услуги произошла     |
|                      |                      | ошибка. Повторите    |
|                      |                      | попытку позднее      |
+----------------------+----------------------+----------------------+
| [[Экран              | По нажатию кнопки    | Услуга заблокирована |
| опции]{.underline}]( | «Начать сеанс»,      |                      |
| #экран-опции)        | пользователь         | Пожалуйста,          |
|                      | авторизован, но      | пополните счет для   |
|                      | заблокирован --      | продления подписки   |
|                      | открывается          |                      |
|                      | модальное окно       | Ок                   |
+----------------------+----------------------+----------------------+
|                      | При нажатии кнопки   | Подписка не оплачена |
|                      | «Начать сеанс»,      |                      |
|                      | пользователь         | При пополнении счета |
|                      | авторизован, услуга  | услуга будет         |
|                      | не подключена --     | активирована в       |
|                      | открывается          | течение дня. На      |
|                      | модальное окно       | вашем счету должно   |
|                      | доступа              | быть больше ... для  |
|                      |                      | оплаты услуги.       |
|                      |                      |                      |
|                      |                      | Стоимость подписки   |
|                      |                      | --                   |
|                      |                      |                      |
|                      |                      | Продлить подписку    |
+----------------------+----------------------+----------------------+
| [[Модальное окно     | По нажатии кнопки    | Ошибка подключения   |
| доступа](#модальное- | «Продлить подписку». |                      |
| окно-доступа)]{.unde | У абонента           | Пожалуйста,          |
| rline}               | недостаточно средств | попробуйте проверить |
| (плашка)             | на счету для         | свой баланс и        |
|                      | подключения услуги   | повторить попытку    |
|                      | или другая ошибка    | позднее              |
|                      | биллинга. Переход на |                      |
|                      | главный экран,       |                      |
|                      | отображается плашка  |                      |
+----------------------+----------------------+----------------------+
|                      | По нажатии кнопки    |                      |
|                      | «Продлить подписку», |                      |
|                      | средств для          |                      |
|                      | подключения          |                      |
|                      | достаточно           |                      |
+----------------------+----------------------+----------------------+
|                      | Ошибка подключения   | При подключении      |
|                      |                      | услуги произошла     |
|                      |                      | ошибка. Повторите    |
|                      |                      | попытку позднее      |
+----------------------+----------------------+----------------------+
| Любой экран          | Произошла ошибка 503 | На сервисе проходят  |
|                      |                      | работы, попробуйте   |
|                      |                      | обновить страницу    |
|                      |                      | или приходите        |
|                      |                      | попозже              |
|                      |                      |                      |
|                      |                      | Обновить страницу    |
+----------------------+----------------------+----------------------+
|                      | Произошла ошибка 404 | Упс, такой страницы  |
|                      |                      | у нас нет            |
|                      |                      |                      |
|                      |                      | На главную           |
+----------------------+----------------------+----------------------+
|                      | Браузер не           | Ваш браузер не       |
|                      | поддерживается       | поддерживается       |
|                      | (плашка)             |                      |
|                      |                      | Некоторые функции    |
|                      |                      | могут быть не        |
|                      |                      | доступны.            |
|                      |                      | Рекомендуем обновить |
|                      |                      | браузер.             |
+----------------------+----------------------+----------------------+

Журнал версий
=============

  **Дата изменения**   **Автор изменения**   **Версия документа**   **Описание изменений**
  -------------------- --------------------- ---------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  11.02.2021           Бурханова М           0.3                    Первая версия на основе ФТ NoSress
  15.02.2021           Бурханова М           0.4                    Удалены пункты беспокойный детский сон и беременность, обновлены макеты [[https://redmine.intech-global.com/issues/118676]{.underline}](https://redmine.intech-global.com/issues/118676)
  19.02.2021           Бурханова М           0.5                    Доработки по сценариям
  15.03.2021           Бурханова М           0.6                    Добавлены [[Требования к плееру (внешние воздействия)]{.underline}](#требования-к-плееру-внешние-воздействия)
